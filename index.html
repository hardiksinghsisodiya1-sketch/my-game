<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- ========================= -->
<!-- GAME TITLE -->
<!-- ========================= -->
<title>Catch The Box - Mega Edition</title>

<!-- ========================= -->
<!-- GAME STYLES -->
<!-- ========================= -->
<style>

/* ===== BODY STYLE ===== */
body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(to bottom, #000, #111);
  color: white;
  text-align: center;
  overflow: hidden;
}

/* ===== GAME HEADER ===== */
h1 {
  margin: 10px;
  font-size: 32px;
}

/* ===== TOP INFO PANEL ===== */
#panel {
  display: flex;
  justify-content: space-around;
  padding: 12px;
  background: rgba(0,0,0,0.7);
  font-size: 18px;
  border-bottom: 2px solid #333;
}

/* ===== BUTTONS ===== */
button {
  padding: 10px 18px;
  margin: 5px;
  font-size: 16px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}

#startBtn { background: lime; }
#pauseBtn { background: orange; }
#resetBtn { background: red; color: white; }

/* ===== GAME BOX ===== */
#box {
  width: 60px;
  height: 60px;
  position: absolute;
  border-radius: 15px;
  cursor: pointer;
  box-shadow: 0 0 20px white;
}

/* ===== GAME OVER SCREEN ===== */
#gameOver {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  font-size: 26px;
}

/* ===== LEVEL MESSAGE ===== */
#levelMsg {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
  font-size: 40px;
  display: none;
  color: yellow;
}

</style>
</head>

<body>

<!-- ========================= -->
<!-- GAME TITLE -->
<!-- ========================= -->
<h1>üéÆ Catch The Box ‚Äì Mega Edition</h1>

<!-- ========================= -->
<!-- INFO PANEL -->
<!-- ========================= -->
<div id="panel">
  ‚è± Time: <span id="time">60</span>
  ‚ù§Ô∏è Life: <span id="life">5</span>
  ‚≠ê Score: <span id="score">0</span>
  üèÜ Level: <span id="level">1</span>
  üî• High: <span id="high">0</span>
</div>

<!-- ========================= -->
<!-- CONTROL BUTTONS -->
<!-- ========================= -->
<div>
  <button id="startBtn">Start</button>
  <button id="pauseBtn">Pause</button>
  <button id="resetBtn">Reset</button>
</div>

<!-- ========================= -->
<!-- GAME BOX -->
<!-- ========================= -->
<div id="box"></div>

<!-- ========================= -->
<!-- LEVEL MESSAGE -->
<!-- ========================= -->
<div id="levelMsg">LEVEL UP!</div>

<!-- ========================= -->
<!-- GAME OVER SCREEN -->
<!-- ========================= -->
<div id="gameOver">
  <h2>üíÄ GAME OVER</h2>
  <p>Final Score: <span id="finalScore"></span></p>
  <p>Level Reached: <span id="finalLevel"></span></p>
  <button onclick="location.reload()">Play Again</button>
</div>

<!-- ========================= -->
<!-- GAME SCRIPT -->
<!-- ========================= -->
<script>

/* ===== GAME VARIABLES ===== */
let score = 0;
let life = 5;
let level = 1;
let time = 60;
let speed = 1200;
let running = false;

/* ===== ELEMENT REFERENCES ===== */
const box = document.getElementById("box");
const timeEl = document.getElementById("time");
const lifeEl = document.getElementById("life");
const scoreEl = document.getElementById("score");
const levelEl = document.getElementById("level");
const highEl = document.getElementById("high");
const levelMsg = document.getElementById("levelMsg");

/* ===== COLORS ===== */
const colors = [
  "red","blue","lime","yellow",
  "orange","pink","cyan","purple"
];

/* ===== INTERVALS ===== */
let moveInterval;
let timerInterval;

/* ===== HIGH SCORE ===== */
let highScore = localStorage.getItem("megaHigh") || 0;
highEl.innerText = highScore;

/* ===== RANDOM NUMBER FUNCTION ===== */
function rand(min, max) {
  return Math.random() * (max - min) + min;
}

/* ===== MOVE BOX FUNCTION ===== */
function moveBox() {
  let x = rand(20, window.innerWidth - 80);
  let y = rand(120, window.innerHeight - 80);

  box.style.left = x + "px";
  box.style.top = y + "px";
  box.style.background =
    colors[Math.floor(Math.random() * colors.length)];
}

/* ===== BOX CLICK ===== */
box.onclick = function(e) {
  if (!running) return;
  e.stopPropagation();

  score++;
  scoreEl.innerText = score;

  /* LEVEL UP SYSTEM */
  if (score % 10 === 0) {
    level++;
    speed -= 120;
    levelEl.innerText = level;

    clearInterval(moveInterval);
    moveInterval = setInterval(moveBox, speed);

    showLevelMessage();
  }

  moveBox();
};

/* ===== MISS CLICK ===== */
document.body.onclick = function() {
  if (!running) return;

  life--;
  lifeEl.innerText = life;

  if (life <= 0) {
    endGame();
  }
};

/* ===== START GAME ===== */
function startGame() {
  if (running) return;
  running = true;

  moveInterval = setInterval(moveBox, speed);

  timerInterval = setInterval(() => {
    time--;
    timeEl.innerText = time;
    if (time <= 0) endGame();
  }, 1000);
}

/* ===== PAUSE GAME ===== */
function pauseGame() {
  running = false;
  clearInterval(moveInterval);
  clearInterval(timerInterval);
}

/* ===== LEVEL MESSAGE ===== */
function showLevelMessage() {
  levelMsg.style.display = "block";
  setTimeout(() => {
    levelMsg.style.display = "none";
  }, 800);
}

/* ===== END GAME ===== */
function endGame() {
  pauseGame();
  document.getElementById("gameOver").style.display = "flex";

  document.getElementById("finalScore").innerText = score;
  document.getElementById("finalLevel").innerText = level;

  if (score > highScore) {
    localStorage.setItem("megaHigh", score);
  }
}

/* ===== BUTTON EVENTS ===== */
document.getElementById("startBtn").onclick = startGame;
document.getElementById("pauseBtn").onclick = pauseGame;
document.getElementById("resetBtn").onclick = () => location.reload();

/* ===== INITIAL POSITION ===== */
moveBox();

</script>
</body>
</html>
